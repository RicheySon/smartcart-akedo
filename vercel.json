{
  "version": 2,
  "buildCommand": "sh -lc \"if [ -f package.json ]; then npm install --legacy-peer-deps && npm run build; elif [ -f client/package.json ]; then cd client && npm install --legacy-peer-deps && npm run build; else echo 'No client package.json found' && exit 1; fi\"",
  "outputDirectory": "client/.next",
  "installCommand": "sh -lc \"# Install in current working dir if package.json exists\nif [ -f package.json ]; then npm install --legacy-peer-deps; fi\n# Install client deps (including dev) if client/package.json exists\nif [ -f client/package.json ]; then (cd client && npm install --legacy-peer-deps --include=dev); fi\n# If Vercel ran inside client (so root is ../), install root deps too\nif [ -f ../package.json ]; then (cd .. && npm install --legacy-peer-deps); fi\"",
  "framework": "nextjs",
  "functions": {
    "client/api/[...path].js": {
      "runtime": "nodejs18.x",
      "memory": 1024,
      "maxDuration": 30
    }
  },
  "rewrites": [
    {
      "source": "/api/(.*)",
      "destination": "/api/$1"
    }
  ]
}